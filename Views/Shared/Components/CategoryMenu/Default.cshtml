@model IEnumerable<DoAn.Data.Loai>

    <div class="mega-menu-category">
        <ul class="nav">
            @{
                var data = Model;
                var level1 = data.Where(lo => lo.MaLoaiCha == null);
            }
            @foreach (var lv1 in level1)
            {
                var level2 = data.Where(lo => lo.MaLoaiCha == lv1.MaLoai);
                <li>
                    <a asp-controller="HangHoa" asp-route-MaLoai="@lv1.MaLoai">@lv1.TenLoai</a>
                    <div class="wrap-popup">
                        <div class="popup">
                            <div class="row">
                                @foreach (var lv2 in level2)
                                {
                                    var level3 = data.Where(lo => lo.MaLoaiCha == lv2.MaLoai);
                                <div class="col-md-4 col-sm-6">
                                    <h3><a asp-controller="HangHoa" asp-route-MaLoai="@lv2.MaLoai"></a>@lv2.TenLoai</h3>
                                    @if (level3.Any())
                                    {
                                        @foreach (var lv3 in level3)
                                        {
                                            <ul class="nav">
                                                <li><a asp-controller="HangHoa" asp-route-MaLoai="@lv3.MaLoai">@lv3.TenLoai</a></li>
                                            </ul>
                                        }

                                    }
                                    <br>
                                </div>
                                }
                            </div>
                        </div>
                    </div>
                </li>
            }
        </ul>
    </div>