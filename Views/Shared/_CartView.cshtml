@using DoAn.Helpers
@using DoAn.ViewModels

@{ 
    var myCarts = Context.Session.Get<List<CartItem>>("GioHang");
    if(myCarts == null)
    {
        myCarts = new List<CartItem>();
    }
}

<div class="top-cart-content">
    @if (myCarts.Count == 0)
    {
        <div class="block-subtitle">Giỏ hàng rỗng</div>
    }
    else
    {
        @foreach (var item in myCarts)
        {
            <ul id="cart-sidebar" class="mini-products-list">
                <li class="item odd">
                    <a asp-action="Detail" asp-controller="HangHoa" asp-route-id="@item.MaHangHoa" title="Product title here" class="product-image">
                        <img src="~/Hinh/HangHoa/@item.Hinh"
                             alt="@item.TenHangHoa" width="65">
                    </a>
                    <div class="product-details">
                        <a href="#" title="Remove This Item" class="remove-cart"><i class="pe-7s-trash"></i></a>
                        <p class="product-name"><a asp-action="Detail" asp-controller="HangHoa" asp-route-id="@item.MaHangHoa">@item.TenHangHoa</a> </p>
                        <strong>1</strong> x <span class="price">@item.DonGia.toVND()</span>
                    </div>
                </li>
            </ul>
        }
    }


    <div class="top-subtotal">Tổng tiền: <span class="price">@myCarts.Sum(p => p.ThanhTien).toVND()</span></div>
    <div class="actions">
        <button class="btn-checkout" type="button" onClick="location.href='/GioHang'"><i class="fa fa-check"></i><span>Checkout</span></button>
        <button class="view-cart" type="button" onClick="location.href='shopping_cart.html'"><i class="fa fa-shopping-cart"></i><span>View Cart</span></button>
    </div>
</div>